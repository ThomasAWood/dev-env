# Setup pyenv in shell config if not already done
if [ -n "$SHELL_CONFIG" ]; then
    if ! grep -q 'PYENV_ROOT' "$SHELL_CONFIG" 2>/dev/null; then
        echo "Adding pyenv configuration to $SHELL_CONFIG..."
        cat >> "$SHELL_CONFIG" << 'EOF'

# pyenv configuration
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init --path)"
eval "$(pyenv init -)"
EOF
        echo "pyenv configuration added to shell config"
    fi
fi

# Load pyenv into current session
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init --path)"
eval "$(pyenv init -)"

# Install Python 3.12
PYTHON_VERSION="3.12"
echo "Installing Python ${PYTHON_VERSION}..."
if ! pyenv versions | grep -q "$PYTHON_VERSION"; then
    pyenv install "$PYTHON_VERSION"
    echo "Python ${PYTHON_VERSION} installed"
else
    echo "Python ${PYTHON_VERSION} already installed"
fi

pyenv global "$PYTHON_VERSION"
echo "Python $(python --version) set as global version"

